{% extends "base.html" %}
{% block title %}Dashboard - Calories Tracker{% endblock %}
{% block content %}
  <h2>Calorie Dashboard</h2>

  <!-- Filter by Date Range -->
  <form method="get" class="filter-form">
    <div>
      <label>From:</label>
      <input type="date" name="from" value="{{ from }}">
    </div>
    <div>
      <label>To:</label>
      <input type="date" name="to" value="{{ to }}">
    </div>
    <button class="btn btn-primary" type="submit">Filter</button>
  </form>

  

  <!-- Meal List -->
  <table class="table table-striped table-bordered">
    <thead>
      <tr class="text-center">
        <th>Date</th><th>Time</th><th>Name</th><th>Description</th><th>Calories</th><th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for meal in meals %}
        <tr class="text-center">
          <td>{{ meal.date }}</td>
          <td>{{ meal.time }}</td>
          <td>{{ meal.name }}</td>
          <td>{{ meal.desc }}</td>
          <td>{{ meal.calories }}</td>
          <td class="table-action">
            <a href="{% url 'edit' meal.pk %}">Edit</a>
            <a style="color: red;" href="{% url 'delete' meal.pk %}">Delete</a>
          </td>
        </tr>
      {% empty %}
        <tr><td colspan="5">No meals to show!.</td></tr>
      {% endfor %}
    </tbody>
  </table>
  
  <!-- Summary -->
  <div class="summary">
    <p><strong>Expected:</strong> {{ expected }} cal</p>
    <p><strong>Total Calories:</strong>
      {% if total_calories > expected %}
        <span style="color: red;">{{ total_calories }}</span>
      {% else %}
        <span style="color: green;">{{ total_calories }}</span>
      {% endif %}
    </p>
    
    <a class="btn btn-success" href="{% url 'add' %}">Add New Meal</a>
  </div>

{% endblock %}
